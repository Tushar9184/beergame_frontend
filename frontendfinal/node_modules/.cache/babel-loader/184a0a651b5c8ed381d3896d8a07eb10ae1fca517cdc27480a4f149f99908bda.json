{"ast":null,"code":"import { Client } from \"@stomp/stompjs\";\nimport SockJS from \"sockjs-client\";\nlet stompClient = null;\nexport function connectSocket({\n  roomId,\n  onStateUpdate\n}) {\n  const socket = new SockJS(\"http://localhost:8080/ws\");\n  stompClient = new Client({\n    webSocketFactory: () => socket,\n    reconnectDelay: 3000,\n    onConnect: () => {\n      console.log(\" Connected to WebSocket\");\n\n      // Subscribe to room updates\n      stompClient.subscribe(`/topic/game/${roomId}`, message => {\n        const state = JSON.parse(message.body);\n        console.log(\"ðŸ“¡ Update received:\", state);\n        onStateUpdate(state);\n      });\n    }\n  });\n  stompClient.activate();\n}\nexport function disconnectSocket() {\n  if (stompClient) stompClient.deactivate();\n}\nexport function sendOrderWS({\n  roomId,\n  role,\n  quantity\n}) {\n  if (stompClient && stompClient.connected) {\n    stompClient.publish({\n      destination: \"/app/order\",\n      body: JSON.stringify({\n        roomId,\n        role,\n        quantity\n      })\n    });\n    console.log(\" Order sent:\", {\n      roomId,\n      role,\n      quantity\n    });\n  } else {\n    console.warn(\" WebSocket not connected yet.\");\n  }\n}","map":{"version":3,"names":["Client","SockJS","stompClient","connectSocket","roomId","onStateUpdate","socket","webSocketFactory","reconnectDelay","onConnect","console","log","subscribe","message","state","JSON","parse","body","activate","disconnectSocket","deactivate","sendOrderWS","role","quantity","connected","publish","destination","stringify","warn"],"sources":["C:/java project/The-Beer-Game/frontendfinal/src/services/socket.js"],"sourcesContent":["import { Client } from \"@stomp/stompjs\";\r\nimport SockJS from \"sockjs-client\";\r\n\r\nlet stompClient = null;\r\n\r\nexport function connectSocket({ roomId, onStateUpdate }) {\r\n  const socket = new SockJS(\"http://localhost:8080/ws\");\r\n  stompClient = new Client({\r\n    webSocketFactory: () => socket,\r\n    reconnectDelay: 3000,\r\n    onConnect: () => {\r\n      console.log(\" Connected to WebSocket\");\r\n\r\n      // Subscribe to room updates\r\n      stompClient.subscribe(`/topic/game/${roomId}`, (message) => {\r\n        const state = JSON.parse(message.body);\r\n        console.log(\"ðŸ“¡ Update received:\", state);\r\n        onStateUpdate(state);\r\n      });\r\n    },\r\n  });\r\n\r\n  stompClient.activate();\r\n}\r\n\r\nexport function disconnectSocket() {\r\n  if (stompClient) stompClient.deactivate();\r\n}\r\n\r\nexport function sendOrderWS({ roomId, role, quantity }) {\r\n  if (stompClient && stompClient.connected) {\r\n    stompClient.publish({\r\n      destination: \"/app/order\",\r\n      body: JSON.stringify({ roomId, role, quantity }),\r\n    });\r\n    console.log(\" Order sent:\", { roomId, role, quantity });\r\n  } else {\r\n    console.warn(\" WebSocket not connected yet.\");\r\n  }\r\n}\r\n"],"mappings":"AAAA,SAASA,MAAM,QAAQ,gBAAgB;AACvC,OAAOC,MAAM,MAAM,eAAe;AAElC,IAAIC,WAAW,GAAG,IAAI;AAEtB,OAAO,SAASC,aAAaA,CAAC;EAAEC,MAAM;EAAEC;AAAc,CAAC,EAAE;EACvD,MAAMC,MAAM,GAAG,IAAIL,MAAM,CAAC,0BAA0B,CAAC;EACrDC,WAAW,GAAG,IAAIF,MAAM,CAAC;IACvBO,gBAAgB,EAAEA,CAAA,KAAMD,MAAM;IAC9BE,cAAc,EAAE,IAAI;IACpBC,SAAS,EAAEA,CAAA,KAAM;MACfC,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC;;MAEtC;MACAT,WAAW,CAACU,SAAS,CAAC,eAAeR,MAAM,EAAE,EAAGS,OAAO,IAAK;QAC1D,MAAMC,KAAK,GAAGC,IAAI,CAACC,KAAK,CAACH,OAAO,CAACI,IAAI,CAAC;QACtCP,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEG,KAAK,CAAC;QACzCT,aAAa,CAACS,KAAK,CAAC;MACtB,CAAC,CAAC;IACJ;EACF,CAAC,CAAC;EAEFZ,WAAW,CAACgB,QAAQ,CAAC,CAAC;AACxB;AAEA,OAAO,SAASC,gBAAgBA,CAAA,EAAG;EACjC,IAAIjB,WAAW,EAAEA,WAAW,CAACkB,UAAU,CAAC,CAAC;AAC3C;AAEA,OAAO,SAASC,WAAWA,CAAC;EAAEjB,MAAM;EAAEkB,IAAI;EAAEC;AAAS,CAAC,EAAE;EACtD,IAAIrB,WAAW,IAAIA,WAAW,CAACsB,SAAS,EAAE;IACxCtB,WAAW,CAACuB,OAAO,CAAC;MAClBC,WAAW,EAAE,YAAY;MACzBT,IAAI,EAAEF,IAAI,CAACY,SAAS,CAAC;QAAEvB,MAAM;QAAEkB,IAAI;QAAEC;MAAS,CAAC;IACjD,CAAC,CAAC;IACFb,OAAO,CAACC,GAAG,CAAC,cAAc,EAAE;MAAEP,MAAM;MAAEkB,IAAI;MAAEC;IAAS,CAAC,CAAC;EACzD,CAAC,MAAM;IACLb,OAAO,CAACkB,IAAI,CAAC,+BAA+B,CAAC;EAC/C;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}