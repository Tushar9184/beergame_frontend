{"ast":null,"code":"import { myAxios } from \"./Helper\";\n\n// ✅ LOGIN\nexport const loginUser = async userData => {\n  const res = await myAxios.post(\"/auth/login\", userData);\n  const {\n    token,\n    username,\n    email\n  } = res.data;\n  localStorage.setItem(\"token\", token);\n  localStorage.setItem(\"username\", username);\n  localStorage.setItem(\"email\", email);\n  return res.data;\n};\n\n// ✅ Step 1: Get OTP from backend\nexport const getOtpFromBackend = async userData => {\n  const res = await myAxios.post(\"/auth/register\", userData);\n  return res.data;\n};\n\n// ✅ Step 2: After OTP matches, register user\nexport const registerUser = async userData => {\n  const res = await myAxios.post(\"/auth/verify\", userData);\n  const data = res.data;\n  localStorage.setItem(\"token\", data.token);\n  localStorage.setItem(\"username\", data.username);\n  localStorage.setItem(\"email\", data.email);\n  return data;\n};\n\n// ✅ CREATE LOBBY\nexport const createLobby = async data => {\n  try {\n    const res = await myAxios.post(\"/lobby/create\", data);\n    const {\n      role\n    } = data;\n    const {\n      roomId\n    } = res.data;\n    if (!roomId) throw new Error(\"No roomId received from backend\");\n\n    // Save to localStorage\n    localStorage.setItem(\"role\", role);\n    localStorage.setItem(\"roomId\", roomId);\n    return res.data;\n  } catch (err) {\n    console.error(\"Error creating lobby:\", err);\n    throw err;\n  }\n};\n\n// ✅ CREATE ROOM\nexport const createRoom = data => {\n  return myAxios.post(\"/room/create\", data).then(res => {\n    const {\n      role\n    } = data;\n    const {\n      roomId\n    } = res.data;\n    localStorage.setItem(\"role\", role);\n    localStorage.setItem(\"roomId\", roomId);\n    return res.data;\n  });\n};","map":{"version":3,"names":["myAxios","loginUser","userData","res","post","token","username","email","data","localStorage","setItem","getOtpFromBackend","registerUser","createLobby","role","roomId","Error","err","console","error","createRoom","then"],"sources":["C:/java project/The-Beer-Game/frontendfinal/src/services/user-service.jsx"],"sourcesContent":["import { myAxios } from \"./Helper\";\r\n\r\n// ✅ LOGIN\r\nexport const loginUser = async (userData) => {\r\n  const res = await myAxios.post(\"/auth/login\", userData);\r\n  const { token, username, email } = res.data;\r\n\r\n  localStorage.setItem(\"token\", token);\r\n  localStorage.setItem(\"username\", username);\r\n  localStorage.setItem(\"email\", email);\r\n\r\n  return res.data;\r\n};\r\n\r\n// ✅ Step 1: Get OTP from backend\r\nexport const getOtpFromBackend = async (userData) => {\r\n  const res = await myAxios.post(\"/auth/register\", userData);\r\n  return res.data;\r\n};\r\n\r\n// ✅ Step 2: After OTP matches, register user\r\nexport const registerUser = async (userData) => {\r\n  const res = await myAxios.post(\"/auth/verify\", userData);\r\n  const data = res.data;\r\n\r\n  localStorage.setItem(\"token\", data.token);\r\n  localStorage.setItem(\"username\", data.username);\r\n  localStorage.setItem(\"email\", data.email);\r\n\r\n  return data;\r\n};\r\n\r\n// ✅ CREATE LOBBY\r\nexport const createLobby = async (data) => {\r\n  try {\r\n    const res = await myAxios.post(\"/lobby/create\", data);\r\n    const { role } = data;\r\n    const { roomId } = res.data;\r\n\r\n    if (!roomId) throw new Error(\"No roomId received from backend\");\r\n\r\n    // Save to localStorage\r\n    localStorage.setItem(\"role\", role);\r\n    localStorage.setItem(\"roomId\", roomId);\r\n\r\n    return res.data;\r\n  } catch (err) {\r\n    console.error(\"Error creating lobby:\", err);\r\n    throw err;\r\n  }\r\n};\r\n\r\n\r\n// ✅ CREATE ROOM\r\nexport const createRoom = (data) => {\r\n  return myAxios.post(\"/room/create\", data)\r\n    .then((res) => {\r\n      const { role } = data;\r\n      const { roomId } = res.data;\r\n\r\n      localStorage.setItem(\"role\", role);\r\n      localStorage.setItem(\"roomId\", roomId);\r\n\r\n      return res.data;\r\n    });\r\n};\r\n"],"mappings":"AAAA,SAASA,OAAO,QAAQ,UAAU;;AAElC;AACA,OAAO,MAAMC,SAAS,GAAG,MAAOC,QAAQ,IAAK;EAC3C,MAAMC,GAAG,GAAG,MAAMH,OAAO,CAACI,IAAI,CAAC,aAAa,EAAEF,QAAQ,CAAC;EACvD,MAAM;IAAEG,KAAK;IAAEC,QAAQ;IAAEC;EAAM,CAAC,GAAGJ,GAAG,CAACK,IAAI;EAE3CC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEL,KAAK,CAAC;EACpCI,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEJ,QAAQ,CAAC;EAC1CG,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEH,KAAK,CAAC;EAEpC,OAAOJ,GAAG,CAACK,IAAI;AACjB,CAAC;;AAED;AACA,OAAO,MAAMG,iBAAiB,GAAG,MAAOT,QAAQ,IAAK;EACnD,MAAMC,GAAG,GAAG,MAAMH,OAAO,CAACI,IAAI,CAAC,gBAAgB,EAAEF,QAAQ,CAAC;EAC1D,OAAOC,GAAG,CAACK,IAAI;AACjB,CAAC;;AAED;AACA,OAAO,MAAMI,YAAY,GAAG,MAAOV,QAAQ,IAAK;EAC9C,MAAMC,GAAG,GAAG,MAAMH,OAAO,CAACI,IAAI,CAAC,cAAc,EAAEF,QAAQ,CAAC;EACxD,MAAMM,IAAI,GAAGL,GAAG,CAACK,IAAI;EAErBC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,IAAI,CAACH,KAAK,CAAC;EACzCI,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEF,IAAI,CAACF,QAAQ,CAAC;EAC/CG,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,IAAI,CAACD,KAAK,CAAC;EAEzC,OAAOC,IAAI;AACb,CAAC;;AAED;AACA,OAAO,MAAMK,WAAW,GAAG,MAAOL,IAAI,IAAK;EACzC,IAAI;IACF,MAAML,GAAG,GAAG,MAAMH,OAAO,CAACI,IAAI,CAAC,eAAe,EAAEI,IAAI,CAAC;IACrD,MAAM;MAAEM;IAAK,CAAC,GAAGN,IAAI;IACrB,MAAM;MAAEO;IAAO,CAAC,GAAGZ,GAAG,CAACK,IAAI;IAE3B,IAAI,CAACO,MAAM,EAAE,MAAM,IAAIC,KAAK,CAAC,iCAAiC,CAAC;;IAE/D;IACAP,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEI,IAAI,CAAC;IAClCL,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAEK,MAAM,CAAC;IAEtC,OAAOZ,GAAG,CAACK,IAAI;EACjB,CAAC,CAAC,OAAOS,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAAC,uBAAuB,EAAEF,GAAG,CAAC;IAC3C,MAAMA,GAAG;EACX;AACF,CAAC;;AAGD;AACA,OAAO,MAAMG,UAAU,GAAIZ,IAAI,IAAK;EAClC,OAAOR,OAAO,CAACI,IAAI,CAAC,cAAc,EAAEI,IAAI,CAAC,CACtCa,IAAI,CAAElB,GAAG,IAAK;IACb,MAAM;MAAEW;IAAK,CAAC,GAAGN,IAAI;IACrB,MAAM;MAAEO;IAAO,CAAC,GAAGZ,GAAG,CAACK,IAAI;IAE3BC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEI,IAAI,CAAC;IAClCL,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAEK,MAAM,CAAC;IAEtC,OAAOZ,GAAG,CAACK,IAAI;EACjB,CAAC,CAAC;AACN,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}