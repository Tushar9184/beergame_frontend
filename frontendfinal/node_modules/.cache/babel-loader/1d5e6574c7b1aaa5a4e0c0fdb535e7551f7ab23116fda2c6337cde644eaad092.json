{"ast":null,"code":"import { myAxios } from \"./Helper\";\n\n// ✅ LOGIN\nexport const loginUser = userData => {\n  return myAxios.post(\"/auth/login\", userData).then(res => {\n    const {\n      token,\n      username,\n      email\n    } = res.data;\n    localStorage.setItem(\"token\", token);\n    localStorage.setItem(\"username\", username);\n    localStorage.setItem(\"email\", email);\n    return res.data;\n  });\n};\n\n// ✅ SIGNUP (FIRST STEP — send OTP)\nexport const registerUser = userData => {\n  return myAxios.post(\"/auth/register\", userData).then(res => {\n    // Backend sends: { message: \"OTP sent\", tempToken }\n    return res.data;\n  });\n};\n\n// ✅ VERIFY OTP & COMPLETE REGISTER\nexport const verifyOtp = (otp, tempToken) => {\n  return myAxios.post(\"/auth/verify\", {\n    otp\n  }, {\n    headers: {\n      Authorization: `Bearer ${tempToken}`\n    }\n  }).then(res => {\n    const {\n      token,\n      username,\n      email,\n      expiresIn\n    } = res.data;\n    localStorage.setItem(\"token\", token);\n    localStorage.setItem(\"username\", username);\n    localStorage.setItem(\"email\", email);\n    localStorage.setItem(\"tokenExpiry\", Date.now() + expiresIn * 1000);\n    return res.data;\n  });\n};\n\n// ✅ CREATE LOBBY\nexport const createLobby = data => {\n  return myAxios.post(\"/lobby/create\", data).then(res => {\n    const {\n      role\n    } = data;\n    const {\n      roomId\n    } = res.data;\n    localStorage.setItem(\"role\", role);\n    localStorage.setItem(\"roomId\", roomId);\n    return res.data;\n  });\n};\n\n// ✅ CREATE ROOM\nexport const createRoom = data => {\n  return myAxios.post(\"/room/create\", data).then(res => {\n    const {\n      role\n    } = data;\n    const {\n      roomId\n    } = res.data;\n    localStorage.setItem(\"role\", role);\n    localStorage.setItem(\"roomId\", roomId);\n    return res.data;\n  });\n};","map":{"version":3,"names":["myAxios","loginUser","userData","post","then","res","token","username","email","data","localStorage","setItem","registerUser","verifyOtp","otp","tempToken","headers","Authorization","expiresIn","Date","now","createLobby","role","roomId","createRoom"],"sources":["C:/java project/The-Beer-Game/frontendfinal/src/services/user-service.jsx"],"sourcesContent":["import { myAxios } from \"./Helper\";\r\n\r\n// ✅ LOGIN\r\nexport const loginUser = (userData) => {\r\n  return myAxios.post(\"/auth/login\", userData)\r\n    .then((res) => {\r\n      const { token, username, email } = res.data;\r\n\r\n      localStorage.setItem(\"token\", token);\r\n      localStorage.setItem(\"username\", username);\r\n      localStorage.setItem(\"email\", email);\r\n\r\n      return res.data;\r\n    });\r\n};\r\n\r\n// ✅ SIGNUP (FIRST STEP — send OTP)\r\nexport const registerUser = (userData) => {\r\n  return myAxios.post(\"/auth/register\", userData)\r\n    .then((res) => {\r\n      // Backend sends: { message: \"OTP sent\", tempToken }\r\n      return res.data;\r\n    });\r\n};\r\n\r\n// ✅ VERIFY OTP & COMPLETE REGISTER\r\nexport const verifyOtp = (otp, tempToken) => {\r\n  return myAxios.post(\"/auth/verify\", { otp }, {\r\n    headers: { Authorization: `Bearer ${tempToken}` }\r\n  })\r\n  .then((res) => {\r\n    const { token, username, email, expiresIn } = res.data;\r\n\r\n    localStorage.setItem(\"token\", token);\r\n    localStorage.setItem(\"username\", username);\r\n    localStorage.setItem(\"email\", email);\r\n    localStorage.setItem(\"tokenExpiry\", Date.now() + expiresIn * 1000);\r\n\r\n    return res.data;\r\n  });\r\n};\r\n\r\n// ✅ CREATE LOBBY\r\nexport const createLobby = (data) => {\r\n  return myAxios.post(\"/lobby/create\", data)\r\n    .then((res) => {\r\n      const { role } = data;\r\n      const { roomId } = res.data;\r\n\r\n      localStorage.setItem(\"role\", role);\r\n      localStorage.setItem(\"roomId\", roomId);\r\n\r\n      return res.data;\r\n    });\r\n};\r\n\r\n// ✅ CREATE ROOM\r\nexport const createRoom = (data) => {\r\n  return myAxios.post(\"/room/create\", data)\r\n    .then((res) => {\r\n      const { role } = data;\r\n      const { roomId } = res.data;\r\n\r\n      localStorage.setItem(\"role\", role);\r\n      localStorage.setItem(\"roomId\", roomId);\r\n\r\n      return res.data;\r\n    });\r\n};\r\n\r\n\r\n"],"mappings":"AAAA,SAASA,OAAO,QAAQ,UAAU;;AAElC;AACA,OAAO,MAAMC,SAAS,GAAIC,QAAQ,IAAK;EACrC,OAAOF,OAAO,CAACG,IAAI,CAAC,aAAa,EAAED,QAAQ,CAAC,CACzCE,IAAI,CAAEC,GAAG,IAAK;IACb,MAAM;MAAEC,KAAK;MAAEC,QAAQ;MAAEC;IAAM,CAAC,GAAGH,GAAG,CAACI,IAAI;IAE3CC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEL,KAAK,CAAC;IACpCI,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEJ,QAAQ,CAAC;IAC1CG,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEH,KAAK,CAAC;IAEpC,OAAOH,GAAG,CAACI,IAAI;EACjB,CAAC,CAAC;AACN,CAAC;;AAED;AACA,OAAO,MAAMG,YAAY,GAAIV,QAAQ,IAAK;EACxC,OAAOF,OAAO,CAACG,IAAI,CAAC,gBAAgB,EAAED,QAAQ,CAAC,CAC5CE,IAAI,CAAEC,GAAG,IAAK;IACb;IACA,OAAOA,GAAG,CAACI,IAAI;EACjB,CAAC,CAAC;AACN,CAAC;;AAED;AACA,OAAO,MAAMI,SAAS,GAAGA,CAACC,GAAG,EAAEC,SAAS,KAAK;EAC3C,OAAOf,OAAO,CAACG,IAAI,CAAC,cAAc,EAAE;IAAEW;EAAI,CAAC,EAAE;IAC3CE,OAAO,EAAE;MAAEC,aAAa,EAAE,UAAUF,SAAS;IAAG;EAClD,CAAC,CAAC,CACDX,IAAI,CAAEC,GAAG,IAAK;IACb,MAAM;MAAEC,KAAK;MAAEC,QAAQ;MAAEC,KAAK;MAAEU;IAAU,CAAC,GAAGb,GAAG,CAACI,IAAI;IAEtDC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEL,KAAK,CAAC;IACpCI,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEJ,QAAQ,CAAC;IAC1CG,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEH,KAAK,CAAC;IACpCE,YAAY,CAACC,OAAO,CAAC,aAAa,EAAEQ,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGF,SAAS,GAAG,IAAI,CAAC;IAElE,OAAOb,GAAG,CAACI,IAAI;EACjB,CAAC,CAAC;AACJ,CAAC;;AAED;AACA,OAAO,MAAMY,WAAW,GAAIZ,IAAI,IAAK;EACnC,OAAOT,OAAO,CAACG,IAAI,CAAC,eAAe,EAAEM,IAAI,CAAC,CACvCL,IAAI,CAAEC,GAAG,IAAK;IACb,MAAM;MAAEiB;IAAK,CAAC,GAAGb,IAAI;IACrB,MAAM;MAAEc;IAAO,CAAC,GAAGlB,GAAG,CAACI,IAAI;IAE3BC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEW,IAAI,CAAC;IAClCZ,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAEY,MAAM,CAAC;IAEtC,OAAOlB,GAAG,CAACI,IAAI;EACjB,CAAC,CAAC;AACN,CAAC;;AAED;AACA,OAAO,MAAMe,UAAU,GAAIf,IAAI,IAAK;EAClC,OAAOT,OAAO,CAACG,IAAI,CAAC,cAAc,EAAEM,IAAI,CAAC,CACtCL,IAAI,CAAEC,GAAG,IAAK;IACb,MAAM;MAAEiB;IAAK,CAAC,GAAGb,IAAI;IACrB,MAAM;MAAEc;IAAO,CAAC,GAAGlB,GAAG,CAACI,IAAI;IAE3BC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEW,IAAI,CAAC;IAClCZ,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAEY,MAAM,CAAC;IAEtC,OAAOlB,GAAG,CAACI,IAAI;EACjB,CAAC,CAAC;AACN,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}