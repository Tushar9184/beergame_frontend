{"ast":null,"code":"import { myAxios } from \"./Helper\";\n\n// âœ… LOGIN\nexport const loginUser = async userData => {\n  const res = await myAxios.post(\"/auth/login\", userData);\n  const {\n    token,\n    username,\n    email\n  } = res.data;\n  localStorage.setItem(\"token\", token);\n  localStorage.setItem(\"username\", username);\n  localStorage.setItem(\"email\", email);\n  return res.data;\n};\n\n// âœ… Step 1: Get OTP from backend\nexport const getOtpFromBackend = async userData => {\n  const res = await myAxios.post(\"/auth/register\", userData);\n  return res.data;\n};\n\n// âœ… Step 2: After OTP matches, register user\nexport const registerUser = async userData => {\n  const res = await myAxios.post(\"/auth/verify\", userData);\n  const data = res.data;\n  localStorage.setItem(\"token\", data.token);\n  localStorage.setItem(\"username\", data.username);\n  localStorage.setItem(\"email\", data.email);\n  return data;\n};\n\n// âœ… CREATE LOBBY\nexport const createLobby = async () => {\n  const token = localStorage.getItem(\"token\"); // ðŸ‘ˆ must match your login key\n\n  if (!token) {\n    throw new Error(\"No token found â€” please login first.\");\n  }\n  try {\n    const res = await myAxios.post(\"/api/game/create\", {}, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    const {\n      gameId\n    } = res.data;\n    localStorage.setItem(\"roomId\", gameId);\n    return res.data;\n  } catch (err) {\n    console.error(\"Error creating lobby:\", err.response || err);\n    throw err;\n  }\n};\n\n// âœ… CREATE ROOM\nexport const createRoom = data => {\n  return myAxios.post(\"/room/create\", data).then(res => {\n    const {\n      role\n    } = data;\n    const {\n      roomId\n    } = res.data;\n    localStorage.setItem(\"role\", role);\n    localStorage.setItem(\"roomId\", roomId);\n    return res.data;\n  });\n};","map":{"version":3,"names":["myAxios","loginUser","userData","res","post","token","username","email","data","localStorage","setItem","getOtpFromBackend","registerUser","createLobby","getItem","Error","headers","Authorization","gameId","err","console","error","response","createRoom","then","role","roomId"],"sources":["C:/java project/The-Beer-Game/frontendfinal/src/services/user-service.jsx"],"sourcesContent":["import { myAxios } from \"./Helper\";\r\n\r\n// âœ… LOGIN\r\nexport const loginUser = async (userData) => {\r\n  const res = await myAxios.post(\"/auth/login\", userData);\r\n  const { token, username, email } = res.data;\r\n\r\n  localStorage.setItem(\"token\", token);\r\n  localStorage.setItem(\"username\", username);\r\n  localStorage.setItem(\"email\", email);\r\n\r\n  return res.data;\r\n};\r\n\r\n// âœ… Step 1: Get OTP from backend\r\nexport const getOtpFromBackend = async (userData) => {\r\n  const res = await myAxios.post(\"/auth/register\", userData);\r\n  return res.data;\r\n};\r\n\r\n// âœ… Step 2: After OTP matches, register user\r\nexport const registerUser = async (userData) => {\r\n  const res = await myAxios.post(\"/auth/verify\", userData);\r\n  const data = res.data;\r\n\r\n  localStorage.setItem(\"token\", data.token);\r\n  localStorage.setItem(\"username\", data.username);\r\n  localStorage.setItem(\"email\", data.email);\r\n\r\n  return data;\r\n};\r\n\r\n// âœ… CREATE LOBBY\r\nexport const createLobby = async () => {\r\n  const token = localStorage.getItem(\"token\"); // ðŸ‘ˆ must match your login key\r\n\r\n  if (!token) {\r\n    throw new Error(\"No token found â€” please login first.\");\r\n  }\r\n\r\n  try {\r\n    const res = await myAxios.post(\r\n      \"/api/game/create\",\r\n      {},\r\n      {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      }\r\n    );\r\n\r\n    const { gameId } = res.data;\r\n    localStorage.setItem(\"roomId\", gameId);\r\n    return res.data;\r\n  } catch (err) {\r\n    console.error(\"Error creating lobby:\", err.response || err);\r\n    throw err;\r\n  }\r\n};\r\n\r\n\r\n\r\n// âœ… CREATE ROOM\r\nexport const createRoom = (data) => {\r\n  return myAxios.post(\"/room/create\", data)\r\n    .then((res) => {\r\n      const { role } = data;\r\n      const { roomId } = res.data;\r\n\r\n      localStorage.setItem(\"role\", role);\r\n      localStorage.setItem(\"roomId\", roomId);\r\n\r\n      return res.data;\r\n    });\r\n};\r\n"],"mappings":"AAAA,SAASA,OAAO,QAAQ,UAAU;;AAElC;AACA,OAAO,MAAMC,SAAS,GAAG,MAAOC,QAAQ,IAAK;EAC3C,MAAMC,GAAG,GAAG,MAAMH,OAAO,CAACI,IAAI,CAAC,aAAa,EAAEF,QAAQ,CAAC;EACvD,MAAM;IAAEG,KAAK;IAAEC,QAAQ;IAAEC;EAAM,CAAC,GAAGJ,GAAG,CAACK,IAAI;EAE3CC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEL,KAAK,CAAC;EACpCI,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEJ,QAAQ,CAAC;EAC1CG,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEH,KAAK,CAAC;EAEpC,OAAOJ,GAAG,CAACK,IAAI;AACjB,CAAC;;AAED;AACA,OAAO,MAAMG,iBAAiB,GAAG,MAAOT,QAAQ,IAAK;EACnD,MAAMC,GAAG,GAAG,MAAMH,OAAO,CAACI,IAAI,CAAC,gBAAgB,EAAEF,QAAQ,CAAC;EAC1D,OAAOC,GAAG,CAACK,IAAI;AACjB,CAAC;;AAED;AACA,OAAO,MAAMI,YAAY,GAAG,MAAOV,QAAQ,IAAK;EAC9C,MAAMC,GAAG,GAAG,MAAMH,OAAO,CAACI,IAAI,CAAC,cAAc,EAAEF,QAAQ,CAAC;EACxD,MAAMM,IAAI,GAAGL,GAAG,CAACK,IAAI;EAErBC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,IAAI,CAACH,KAAK,CAAC;EACzCI,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEF,IAAI,CAACF,QAAQ,CAAC;EAC/CG,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,IAAI,CAACD,KAAK,CAAC;EAEzC,OAAOC,IAAI;AACb,CAAC;;AAED;AACA,OAAO,MAAMK,WAAW,GAAG,MAAAA,CAAA,KAAY;EACrC,MAAMR,KAAK,GAAGI,YAAY,CAACK,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;;EAE7C,IAAI,CAACT,KAAK,EAAE;IACV,MAAM,IAAIU,KAAK,CAAC,sCAAsC,CAAC;EACzD;EAEA,IAAI;IACF,MAAMZ,GAAG,GAAG,MAAMH,OAAO,CAACI,IAAI,CAC5B,kBAAkB,EAClB,CAAC,CAAC,EACF;MACEY,OAAO,EAAE;QACPC,aAAa,EAAE,UAAUZ,KAAK;MAChC;IACF,CACF,CAAC;IAED,MAAM;MAAEa;IAAO,CAAC,GAAGf,GAAG,CAACK,IAAI;IAC3BC,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAEQ,MAAM,CAAC;IACtC,OAAOf,GAAG,CAACK,IAAI;EACjB,CAAC,CAAC,OAAOW,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAAC,uBAAuB,EAAEF,GAAG,CAACG,QAAQ,IAAIH,GAAG,CAAC;IAC3D,MAAMA,GAAG;EACX;AACF,CAAC;;AAID;AACA,OAAO,MAAMI,UAAU,GAAIf,IAAI,IAAK;EAClC,OAAOR,OAAO,CAACI,IAAI,CAAC,cAAc,EAAEI,IAAI,CAAC,CACtCgB,IAAI,CAAErB,GAAG,IAAK;IACb,MAAM;MAAEsB;IAAK,CAAC,GAAGjB,IAAI;IACrB,MAAM;MAAEkB;IAAO,CAAC,GAAGvB,GAAG,CAACK,IAAI;IAE3BC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEe,IAAI,CAAC;IAClChB,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAEgB,MAAM,CAAC;IAEtC,OAAOvB,GAAG,CAACK,IAAI;EACjB,CAAC,CAAC;AACN,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}