{"ast":null,"code":"import { myAxios } from \"./Helper\";\n\n// ✅ LOGIN\nexport const loginUser = async userData => {\n  const res = await myAxios.post(\"/auth/login\", userData);\n  const {\n    token,\n    username,\n    email\n  } = res.data;\n  localStorage.setItem(\"token\", token);\n  localStorage.setItem(\"username\", username);\n  localStorage.setItem(\"email\", email);\n  return res.data;\n};\n\n// ✅ Step 1: Get OTP from backend\nexport const getOtpFromBackend = async userData => {\n  const res = await myAxios.post(\"/auth/register\", userData);\n  return res.data;\n};\n\n// ✅ Step 2: After OTP matches, register user\nexport const registerUser = async userData => {\n  const res = await myAxios.post(\"/auth/verify\", userData);\n  const data = res.data;\n  localStorage.setItem(\"token\", data.token);\n  localStorage.setItem(\"username\", data.username);\n  localStorage.setItem(\"email\", data.email);\n  return data;\n};\n\n// ✅ CREATE LOBBY\nexport const createLobby = async lobbyData => {\n  const token = localStorage.getItem(\"token\");\n  if (!token) {\n    throw new Error(\"No token found — please login first.\");\n  }\n  try {\n    const res = await myAxios.post(\"/api/game/create\", lobbyData,\n    // Send the data as the body\n    {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    const {\n      gameId\n    } = res.data;\n    localStorage.setItem(\"roomId\", gameId);\n    return res.data;\n  } catch (err) {\n    console.error(\"Error creating lobby:\", err.response || err);\n    throw err;\n  }\n};\n\n// ✅ CREATE ROOM (Updated to async/await for consistency)\nexport const createRoom = async () => {\n  // 1. Call the endpoint with an empty body, as your backend expects no data.\n  // 2. No JWT is sent, as your backend endpoint isn't secured.\n  const res = await myAxios.post(\"/api/room/create\", {});\n\n  // 3. Return the raw response data (the GameRoom object)\n  return res.data;\n};","map":{"version":3,"names":["myAxios","loginUser","userData","res","post","token","username","email","data","localStorage","setItem","getOtpFromBackend","registerUser","createLobby","lobbyData","getItem","Error","headers","Authorization","gameId","err","console","error","response","createRoom"],"sources":["C:/Users/sabha/OneDrive/Documents/GitHub/beergame_frontend/frontendfinal/src/services/user-service.jsx"],"sourcesContent":["import { myAxios } from \"./Helper\";\r\n\r\n// ✅ LOGIN\r\nexport const loginUser = async (userData) => {\r\n  const res = await myAxios.post(\"/auth/login\", userData);\r\n  const { token, username, email } = res.data;\r\n\r\n  localStorage.setItem(\"token\", token);\r\n  localStorage.setItem(\"username\", username);\r\n  localStorage.setItem(\"email\", email);\r\n\r\n  return res.data;\r\n};\r\n\r\n// ✅ Step 1: Get OTP from backend\r\nexport const getOtpFromBackend = async (userData) => {\r\n  const res = await myAxios.post(\"/auth/register\", userData);\r\n  return res.data;\r\n};\r\n\r\n// ✅ Step 2: After OTP matches, register user\r\nexport const registerUser = async (userData) => {\r\n  const res = await myAxios.post(\"/auth/verify\", userData);\r\n  const data = res.data;\r\n\r\n  localStorage.setItem(\"token\", data.token);\r\n  localStorage.setItem(\"username\", data.username);\r\n  localStorage.setItem(\"email\", data.email);\r\n\r\n  return data;\r\n};\r\n\r\n// ✅ CREATE LOBBY\r\nexport const createLobby = async (lobbyData) => {\r\n  const token = localStorage.getItem(\"token\");\r\n\r\n  if (!token) {\r\n    throw new Error(\"No token found — please login first.\");\r\n  }\r\n\r\n  try {\r\n    const res = await myAxios.post(\r\n      \"/api/game/create\",\r\n      lobbyData, // Send the data as the body\r\n      {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      }\r\n    );\r\n\r\n    const { gameId } = res.data;\r\n    localStorage.setItem(\"roomId\", gameId);\r\n    return res.data;\r\n  } catch (err) {\r\n    console.error(\"Error creating lobby:\", err.response || err);\r\n    throw err;\r\n  }\r\n};\r\n\r\n// ✅ CREATE ROOM (Updated to async/await for consistency)\r\nexport const createRoom = async () => {\r\n  // 1. Call the endpoint with an empty body, as your backend expects no data.\r\n  // 2. No JWT is sent, as your backend endpoint isn't secured.\r\n  const res = await myAxios.post(\"/api/room/create\", {});\r\n  \r\n  // 3. Return the raw response data (the GameRoom object)\r\n  return res.data;\r\n};"],"mappings":"AAAA,SAASA,OAAO,QAAQ,UAAU;;AAElC;AACA,OAAO,MAAMC,SAAS,GAAG,MAAOC,QAAQ,IAAK;EAC3C,MAAMC,GAAG,GAAG,MAAMH,OAAO,CAACI,IAAI,CAAC,aAAa,EAAEF,QAAQ,CAAC;EACvD,MAAM;IAAEG,KAAK;IAAEC,QAAQ;IAAEC;EAAM,CAAC,GAAGJ,GAAG,CAACK,IAAI;EAE3CC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEL,KAAK,CAAC;EACpCI,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEJ,QAAQ,CAAC;EAC1CG,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEH,KAAK,CAAC;EAEpC,OAAOJ,GAAG,CAACK,IAAI;AACjB,CAAC;;AAED;AACA,OAAO,MAAMG,iBAAiB,GAAG,MAAOT,QAAQ,IAAK;EACnD,MAAMC,GAAG,GAAG,MAAMH,OAAO,CAACI,IAAI,CAAC,gBAAgB,EAAEF,QAAQ,CAAC;EAC1D,OAAOC,GAAG,CAACK,IAAI;AACjB,CAAC;;AAED;AACA,OAAO,MAAMI,YAAY,GAAG,MAAOV,QAAQ,IAAK;EAC9C,MAAMC,GAAG,GAAG,MAAMH,OAAO,CAACI,IAAI,CAAC,cAAc,EAAEF,QAAQ,CAAC;EACxD,MAAMM,IAAI,GAAGL,GAAG,CAACK,IAAI;EAErBC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,IAAI,CAACH,KAAK,CAAC;EACzCI,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEF,IAAI,CAACF,QAAQ,CAAC;EAC/CG,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,IAAI,CAACD,KAAK,CAAC;EAEzC,OAAOC,IAAI;AACb,CAAC;;AAED;AACA,OAAO,MAAMK,WAAW,GAAG,MAAOC,SAAS,IAAK;EAC9C,MAAMT,KAAK,GAAGI,YAAY,CAACM,OAAO,CAAC,OAAO,CAAC;EAE3C,IAAI,CAACV,KAAK,EAAE;IACV,MAAM,IAAIW,KAAK,CAAC,sCAAsC,CAAC;EACzD;EAEA,IAAI;IACF,MAAMb,GAAG,GAAG,MAAMH,OAAO,CAACI,IAAI,CAC5B,kBAAkB,EAClBU,SAAS;IAAE;IACX;MACEG,OAAO,EAAE;QACPC,aAAa,EAAE,UAAUb,KAAK;MAChC;IACF,CACF,CAAC;IAED,MAAM;MAAEc;IAAO,CAAC,GAAGhB,GAAG,CAACK,IAAI;IAC3BC,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAES,MAAM,CAAC;IACtC,OAAOhB,GAAG,CAACK,IAAI;EACjB,CAAC,CAAC,OAAOY,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAAC,uBAAuB,EAAEF,GAAG,CAACG,QAAQ,IAAIH,GAAG,CAAC;IAC3D,MAAMA,GAAG;EACX;AACF,CAAC;;AAED;AACA,OAAO,MAAMI,UAAU,GAAG,MAAAA,CAAA,KAAY;EACpC;EACA;EACA,MAAMrB,GAAG,GAAG,MAAMH,OAAO,CAACI,IAAI,CAAC,kBAAkB,EAAE,CAAC,CAAC,CAAC;;EAEtD;EACA,OAAOD,GAAG,CAACK,IAAI;AACjB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}