{"ast":null,"code":"import { myAxios } from \"./Helper\";\n\n// âœ… LOGIN\nexport const loginUser = async userData => {\n  const res = await myAxios.post(\"/auth/login\", userData);\n  const {\n    token,\n    username,\n    email\n  } = res.data;\n  localStorage.setItem(\"token\", token);\n  localStorage.setItem(\"username\", username);\n  localStorage.setItem(\"email\", email);\n  return res.data;\n};\n\n// âœ… Step 1: Get OTP from backend\nexport const getOtpFromBackend = async userData => {\n  const res = await myAxios.post(\"/auth/register\", userData);\n  return res.data;\n};\n\n// âœ… Step 2: After OTP matches, register user\nexport const registerUser = async userData => {\n  const res = await myAxios.post(\"/auth/verify\", userData);\n  const data = res.data;\n  localStorage.setItem(\"token\", data.token);\n  localStorage.setItem(\"username\", data.username);\n  localStorage.setItem(\"email\", data.email);\n  return data;\n};\n\n// âœ… CREATE GAME (replaces old createLobby)\nexport const createLobby = async () => {\n  const token = localStorage.getItem(\"token\");\n  if (!token) {\n    throw new Error(\"User not authenticated\");\n  }\n  try {\n    const res = await myAxios.post(\"/api/game/create\", {},\n    // backend doesnâ€™t need body\n    {\n      headers: {\n        Authorization: `Bearer ${token}` // ðŸ”¥ required for Spring Security\n      }\n    });\n    const {\n      gameId\n    } = res.data; // matches GameStateDTO\n    localStorage.setItem(\"roomId\", gameId);\n    return res.data;\n  } catch (err) {\n    console.error(\"Error creating lobby:\", err);\n    throw err;\n  }\n};","map":{"version":3,"names":["myAxios","loginUser","userData","res","post","token","username","email","data","localStorage","setItem","getOtpFromBackend","registerUser","createLobby","getItem","Error","headers","Authorization","gameId","err","console","error"],"sources":["C:/java project/The-Beer-Game/frontendfinal/src/services/user-service.jsx"],"sourcesContent":["import { myAxios } from \"./Helper\";\r\n\r\n// âœ… LOGIN\r\nexport const loginUser = async (userData) => {\r\n  const res = await myAxios.post(\"/auth/login\", userData);\r\n  const { token, username, email } = res.data;\r\n\r\n  localStorage.setItem(\"token\", token);\r\n  localStorage.setItem(\"username\", username);\r\n  localStorage.setItem(\"email\", email);\r\n\r\n  return res.data;\r\n};\r\n\r\n// âœ… Step 1: Get OTP from backend\r\nexport const getOtpFromBackend = async (userData) => {\r\n  const res = await myAxios.post(\"/auth/register\", userData);\r\n  return res.data;\r\n};\r\n\r\n// âœ… Step 2: After OTP matches, register user\r\nexport const registerUser = async (userData) => {\r\n  const res = await myAxios.post(\"/auth/verify\", userData);\r\n  const data = res.data;\r\n\r\n  localStorage.setItem(\"token\", data.token);\r\n  localStorage.setItem(\"username\", data.username);\r\n  localStorage.setItem(\"email\", data.email);\r\n\r\n  return data;\r\n};\r\n\r\n// âœ… CREATE GAME (replaces old createLobby)\r\nexport const createLobby = async () => {\r\n  const token = localStorage.getItem(\"token\");\r\n\r\n  if (!token) {\r\n    throw new Error(\"User not authenticated\");\r\n  }\r\n\r\n  try {\r\n    const res = await myAxios.post(\r\n      \"/api/game/create\",\r\n      {}, // backend doesnâ€™t need body\r\n      {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`, // ðŸ”¥ required for Spring Security\r\n        },\r\n      }\r\n    );\r\n\r\n    const { gameId } = res.data; // matches GameStateDTO\r\n    localStorage.setItem(\"roomId\", gameId);\r\n\r\n    return res.data;\r\n  } catch (err) {\r\n    console.error(\"Error creating lobby:\", err);\r\n    throw err;\r\n  }\r\n};\r\n"],"mappings":"AAAA,SAASA,OAAO,QAAQ,UAAU;;AAElC;AACA,OAAO,MAAMC,SAAS,GAAG,MAAOC,QAAQ,IAAK;EAC3C,MAAMC,GAAG,GAAG,MAAMH,OAAO,CAACI,IAAI,CAAC,aAAa,EAAEF,QAAQ,CAAC;EACvD,MAAM;IAAEG,KAAK;IAAEC,QAAQ;IAAEC;EAAM,CAAC,GAAGJ,GAAG,CAACK,IAAI;EAE3CC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEL,KAAK,CAAC;EACpCI,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEJ,QAAQ,CAAC;EAC1CG,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEH,KAAK,CAAC;EAEpC,OAAOJ,GAAG,CAACK,IAAI;AACjB,CAAC;;AAED;AACA,OAAO,MAAMG,iBAAiB,GAAG,MAAOT,QAAQ,IAAK;EACnD,MAAMC,GAAG,GAAG,MAAMH,OAAO,CAACI,IAAI,CAAC,gBAAgB,EAAEF,QAAQ,CAAC;EAC1D,OAAOC,GAAG,CAACK,IAAI;AACjB,CAAC;;AAED;AACA,OAAO,MAAMI,YAAY,GAAG,MAAOV,QAAQ,IAAK;EAC9C,MAAMC,GAAG,GAAG,MAAMH,OAAO,CAACI,IAAI,CAAC,cAAc,EAAEF,QAAQ,CAAC;EACxD,MAAMM,IAAI,GAAGL,GAAG,CAACK,IAAI;EAErBC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,IAAI,CAACH,KAAK,CAAC;EACzCI,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEF,IAAI,CAACF,QAAQ,CAAC;EAC/CG,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,IAAI,CAACD,KAAK,CAAC;EAEzC,OAAOC,IAAI;AACb,CAAC;;AAED;AACA,OAAO,MAAMK,WAAW,GAAG,MAAAA,CAAA,KAAY;EACrC,MAAMR,KAAK,GAAGI,YAAY,CAACK,OAAO,CAAC,OAAO,CAAC;EAE3C,IAAI,CAACT,KAAK,EAAE;IACV,MAAM,IAAIU,KAAK,CAAC,wBAAwB,CAAC;EAC3C;EAEA,IAAI;IACF,MAAMZ,GAAG,GAAG,MAAMH,OAAO,CAACI,IAAI,CAC5B,kBAAkB,EAClB,CAAC,CAAC;IAAE;IACJ;MACEY,OAAO,EAAE;QACPC,aAAa,EAAE,UAAUZ,KAAK,EAAE,CAAE;MACpC;IACF,CACF,CAAC;IAED,MAAM;MAAEa;IAAO,CAAC,GAAGf,GAAG,CAACK,IAAI,CAAC,CAAC;IAC7BC,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAEQ,MAAM,CAAC;IAEtC,OAAOf,GAAG,CAACK,IAAI;EACjB,CAAC,CAAC,OAAOW,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAAC,uBAAuB,EAAEF,GAAG,CAAC;IAC3C,MAAMA,GAAG;EACX;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}